import{g as a}from"./index.CB87Sc6I.js";class r{ctx;boundAfterSwapHandler;boundPageLoadHandlers;constructor(){this.ctx=null,this.boundAfterSwapHandler=this.onChangePage.bind(this),this.boundPageLoadHandlers=new Map,document.addEventListener("astro:after-swap",this.boundAfterSwapHandler)}initializeContext(){this.ctx===null&&(this.ctx=a.context(()=>{}))}elementExists(e){if(!e)throw new Error("ID cannot be null");return document.getElementById(e)!==null}onElementLoaded(e,t){if(!this.boundPageLoadHandlers.has(e)){const n=()=>this.onPageLoad(e,t);this.boundPageLoadHandlers.set(e,n),document.addEventListener("astro:page-load",n)}}onPageLoad(e,t){this.elementExists(e)&&(this.initializeContext(),t(this.ctx))}revertContext(){this.ctx!==null&&(this.ctx.revert(),this.ctx=null)}onChangePage(){this.revertContext()}cleanup(){this.revertContext(),document.removeEventListener("astro:after-swap",this.boundAfterSwapHandler),this.boundPageLoadHandlers.forEach((e,t)=>{document.removeEventListener("astro:page-load",e)}),this.boundPageLoadHandlers.clear()}}export{r as L};
